# Reading email.
#set folder = imaps://imap.gmail.com/
set folder = ~/mail
#set imap_user = paulsmith@gmail.com
#set imap_pass = `security find-internet-password -g -a paulsmith@gmail.com -s imap.gmail.com 2>&1 >/dev/null | grep "^password: " | cut -d"\"" -f 2`
#set spoolfile = +INBOX
set spoolfile = +paulsmith-gmail.com/INBOX
source ~/.mutt/mailboxes
#set spoolfile = +paulsmith-gmail.com/archive
#set imap_check_subscribed
#mailboxes = +paulsmith-gmail.com/INBOX \
#            +paulsmith-gmail.com/archive \
#            +paulsmith-gmail.com/sent \
#            +paulsmith-gmail.com/drafts
set mbox = +paulsmith-gmail.com/archive
#set trash = +paulsmith-gmail.com/trash

#set header_cache="~/.mutt/cache/headers"
#set message_cachedir="~/.mutt/cache/bodies"
set header_cache="~/.mutt/cache2/headers"
set message_cachedir="~/.mutt/cache2/bodies"
set certificate_file="~/.mutt/certificates"

#set postponed="+[Gmail]/Drafts"
set postponed = +paulsmith-gmail.com/drafts

unset imap_passive # Allow mutt to open new connections as needed.
set imap_keepalive = 900 # Keep IMAP conn alive by polling.
set mail_check = 0 # How often (in seconds) Mutt should look for new mail.

set move = no # Gmail moves email.
unset wait_key # Return immediately from external processes.
unset metoo # Remove me from CC.
set delete 
unset confirmappend
set quit
unset mark_old
auto_view text/html
set sleep_time = 0 # Remove delay between switching folders.

# Composing email.
set realname = "Paul Smith"
set from = "paulsmith@pobox.com"
set envelope_from
set sig_dashes # Use dashes befor sig.
set signature = "~/.signature"
set sendmail = "msmtp -a paulsmith"
unset record # Gmail saves a copy in Sent Mail.
set fast_reply # Skip to compose when replying.
set edit_hdrs
set editor = "vim \"+set spell\""
set fcc_attach # Save attachments with the body.
unset mime_forward # Forward attachments as part of the body.
set askcc
set attribution = "On %d, %n wrote:"
set forward_format = "Fwd: %s"
set reply_to # Reply to the Reply to: field.
set reverse_name # Reply as whomever it was to.
set include # Include message in replies.
set forward_quote # Include message in forwards.
my_hdr X-Ham-Radio: KA3PRP
set text_flowed = yes # Generate text/plain; format=flowed attachments.

set sort = threads
set sort_aux = reverse-last-date-received
set pager_index_lines = 10
set pager_context = 3
set pager_stop

# Contacts
set query_command = "goobook query '%s'"
macro index,pager a "<pipe-message>goobook add<return>" "add sender to google contacts"
bind editor <Tab> complete-query

ignore *
unignore from subject to cc date x-mailer x-url user-agent
unhdr_order *
hdr_order from to cc date subject x-mailer user-agent

alternates paulsmith@pobox.com paul@adhocteam.us paul@hcgov.us \
           paul@gerrymanderpresents.com

bind editor <space> noop
#bind index G imap-fetch-mail
#macro index,pager y "<save-message>=[Gmail]/All Mail<enter>" "move message to archive"
#macro index ga "<change-folder>=[Gmail]/All Mail<enter>" "go to archive"
macro index ga "<change-folder>+paulsmith-gmail.com/archive<enter>" "go to archive"
macro index gi "<change-folder>+paulsmith-gmail.com/INBOX<enter>" "go to inbox"
macro index / "<enter-command>unset wait_key<enter><shell-escape>mutt-notmuch-py<enter><change-folder-readonly>~/.cache/mutt_results<enter>" \
    "search index (using notmuch)"

color error brightred white
color indicator white yellow
color status white green
color search white black
color hdrdefault white black
color header green black ^From:
color quoted cyan black
color signature red black
